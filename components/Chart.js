import React from 'react';
import ReactDOM from 'react-dom';
import ReactHighstock from 'react-highcharts/ReactHighstock'
import { Button } from 'reactstrap'

// chart.series[0].data
const data = [
    [1483401600000,115.80,116.33,114.76,116.15],
 [1483488000000,115.85,116.51,115.75,116.02],
 [1483574400000,115.92,116.86,115.81,116.61],
 [1483660800000,116.78,118.16,116.47,117.91],
 [1483920000000,117.95,119.43,117.94,118.99],
 [1484006400000,118.77,119.38,118.30,119.11],
 [1484092800000,118.74,119.93,118.60,119.75],
 [1484179200000,118.90,119.30,118.21,119.25],
 [1484265600000,119.11,119.62,118.81,119.04],
 [1484611200000,118.34,120.24,118.22,120.00],
 [1484697600000,120.00,120.50,119.71,119.99],
 [1484784000000,119.40,120.09,119.37,119.78],
 [1484870400000,120.45,120.45,119.73,120.00],
 [1485129600000,120.00,120.81,119.77,120.08],
 [1485216000000,119.55,120.10,119.50,119.97],
 [1485302400000,120.42,122.10,120.28,121.88],
 [1485388800000,121.67,122.44,121.60,121.94],
 [1485475200000,122.14,122.35,121.60,121.95],
 [1485734400000,120.93,121.63,120.66,121.63],
 [1485820800000,121.15,121.39,120.62,121.35],
 [1485907200000,127.03,130.49,127.01,128.75],
 [1485993600000,127.98,129.39,127.78,128.53],
 [1486080000000,128.31,129.19,128.16,129.08],
 [1486339200000,129.13,130.50,128.90,130.29],
 [1486425600000,130.54,132.09,130.45,131.53],
 [1486512000000,131.35,132.22,131.22,132.04],
 [1486598400000,131.65,132.44,131.12,132.42],
 [1486684800000,132.46,132.94,132.05,132.12],
 [1486944000000,133.08,133.82,132.75,133.29],
 [1487030400000,133.47,135.09,133.25,135.02],
 [1487116800000,135.52,136.27,134.62,135.51],
 [1487203200000,135.67,135.90,134.84,135.34],
 [1487289600000,135.10,135.83,135.10,135.72],
 [1487635200000,136.23,136.75,135.98,136.70],
 [1487721600000,136.43,137.12,136.11,137.11],
 [1487808000000,137.38,137.48,136.30,136.53],
 [1487894400000,135.91,136.66,135.28,136.66],
 [1488153600000,137.14,137.44,136.28,136.93],
 [1488240000000,137.08,137.44,136.70,136.99],
 [1488326400000,137.89,140.15,137.60,139.79],
 [1488412800000,140.00,140.28,138.76,138.96],
 [1488499200000,138.78,139.83,138.59,139.78],
 [1488758400000,139.36,139.77,138.60,139.34],
 [1488844800000,139.06,139.98,138.79,139.52],
 [1488931200000,138.95,139.80,138.82,139.00],
 [1489017600000,138.74,138.79,137.05,138.68],
 [1489104000000,139.25,139.36,138.64,139.14],
 [1489363200000,138.85,139.43,138.82,139.20],
 [1489449600000,139.30,139.65,138.84,138.99],
 [1489536000000,139.41,140.75,139.02,140.46],
 [1489622400000,140.72,141.02,140.26,140.69],
 [1489708800000,141.00,141.00,139.89,139.99],
 [1489968000000,140.40,141.50,140.23,141.46],
 [1490054400000,142.11,142.80,139.73,139.84],
 [1490140800000,139.84,141.60,139.76,141.42],
 [1490227200000,141.26,141.58,140.61,140.92]

   ];

const config = {
  rangeSelector: {
    selected: 1
  },
  title: {
    text: 'AAPL Stock Price'
  },
  series: [{
    type: 'candlestick',
    name: 'AAPL',
    data: data,
    tooltip: {
      valueDecimals: 2
    }
  }]
};

var gimmeScope;

class MyChart extends React.Component {
  constructor(props) {
    super(props)
    this.onClick = this.onClick.bind(this)
  }

  onClick() {
    gimmeScope = this
    const chart = gimmeScope.refs.chart.getChart()

// for (var i=0; i<5; i++) {
//  setTimeout(()=>{alert('hi')}, 2000);
// }

    const newPoints = [
      [1490313600000,141.50,141.74,140.35,140.64],
      [1490572800000,139.39,141.22,138.62,140.88],
      [1490659200000,140.91,144.04,140.62,143.80],
      [1490745600000,143.68,144.49,143.19,144.12],
      [1490832000000,144.19,144.50,143.50,144.44]
    ]
      for (let i = 0; i < newPoints.length; i++) {
        
        setTimeout(() => {chart.series[0].addPoint(newPoints[i])}, 2000 * (i + 1))

      }


}


  render() {
    return (
      <div>
        <ReactHighstock config={config} ref="chart"></ReactHighstock>
        <Button color="secondary" onClick={this.onClick}>More Data</Button>
      </div>
    )
  }
}

export default MyChart

